@model CarRentingSystem2025.Models.Car
@{
    ViewData["Title"] = "Edit Car";
    Layout = "_AdminLayout";
}

<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-10">
            @if (TempData["ErrorMessage"] != null)
            {
                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                    <i class="fas fa-exclamation-triangle"></i> @TempData["ErrorMessage"]
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            }
            
            <div class="card">
                <div class="card-header">
                    <h4><i class="fas fa-edit"></i> Edit Car</h4>
                </div>
                <div class="card-body">
                    <form asp-area="Admin" asp-controller="Cars" asp-action="Edit" method="post">
                        @Html.AntiForgeryToken()
                        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                        <input type="hidden" asp-for="Id" />
                        <input type="hidden" asp-for="Brand" />
                        <input type="hidden" asp-for="CreatedAt" />
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label asp-for="BrandId" class="control-label">Brand</label>
                                    <select name="BrandId" class="form-select">
                                        <option value="">-- Select Brand --</option>
                                        @foreach (var brand in ViewBag.BrandId)
                                        {
                                            if (brand.Value == Model.BrandId.ToString())
                                            {
                                                <option value="@brand.Value" selected>@brand.Text</option>
                                            }
                                            else
                                            {
                                                <option value="@brand.Value">@brand.Text</option>
                                            }
                                        }
                                    </select>
                                    <span asp-validation-for="BrandId" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label asp-for="Model" class="control-label">Model</label>
                                    <input name="Model" class="form-control" value="@Model.Model" />
                                    <span asp-validation-for="Model" class="text-danger"></span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group mb-3">
                                    <label asp-for="Year" class="control-label">Year</label>
                                    <input name="Year" class="form-control" type="number" min="1900" max="2030" value="@Model.Year" />
                                    <span asp-validation-for="Year" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group mb-3">
                                    <label asp-for="LicensePlate" class="control-label">License Plate</label>
                                    <input name="LicensePlate" class="form-control" value="@Model.LicensePlate" />
                                    <span asp-validation-for="LicensePlate" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group mb-3">
                                    <label asp-for="Color" class="control-label">Color</label>
                                    <input name="Color" class="form-control" value="@Model.Color" />
                                    <span asp-validation-for="Color" class="text-danger"></span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group mb-3">
                                    <label asp-for="DailyRate" class="control-label">Daily Rate (â‚¬)</label>
                                    <input name="DailyRate" class="form-control" type="number" step="0.01" min="0" value="@Model.DailyRate" />
                                    <span asp-validation-for="DailyRate" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group mb-3">
                                    <label asp-for="FuelType" class="control-label">Fuel Type</label>
                                    <select name="FuelType" class="form-select">
                                        <option value="">-- Select Fuel Type --</option>
                                        <option value="Gasoline" @(Model.FuelType == "Gasoline" ? "selected" : "")>Gasoline</option>
                                        <option value="Diesel" @(Model.FuelType == "Diesel" ? "selected" : "")>Diesel</option>
                                        <option value="Electric" @(Model.FuelType == "Electric" ? "selected" : "")>Electric</option>
                                        <option value="Hybrid" @(Model.FuelType == "Hybrid" ? "selected" : "")>Hybrid</option>
                                    </select>
                                    <span asp-validation-for="FuelType" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group mb-3">
                                    <label asp-for="Transmission" class="control-label">Transmission</label>
                                    <select name="Transmission" class="form-select">
                                        <option value="">-- Select Transmission --</option>
                                        <option value="Manual" @(Model.Transmission == "Manual" ? "selected" : "")>Manual</option>
                                        <option value="Automatic" @(Model.Transmission == "Automatic" ? "selected" : "")>Automatic</option>
                                    </select>
                                    <span asp-validation-for="Transmission" class="text-danger"></span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group mb-3">
                                    <label asp-for="Seats" class="control-label">Seats</label>
                                    <input name="Seats" class="form-control" type="number" min="1" max="10" value="@Model.Seats" />
                                    <span asp-validation-for="Seats" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group mb-3">
                                    <label asp-for="Mileage" class="control-label">Mileage (km)</label>
                                    <input name="Mileage" class="form-control" type="number" min="0" value="@Model.Mileage" />
                                    <span asp-validation-for="Mileage" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group mb-3">
                                    <label asp-for="EngineSize" class="control-label">Engine Size</label>
                                    <input name="EngineSize" class="form-control" placeholder="e.g., 2.0L" value="@Model.EngineSize" />
                                    <span asp-validation-for="EngineSize" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group mb-3">
                                    <label asp-for="BodyType" class="control-label">Body Type</label>
                                    <select name="BodyType" class="form-select">
                                        <option value="">-- Select Body Type --</option>
                                        <option value="Sedan" @(Model.BodyType == "Sedan" ? "selected" : "")>Sedan</option>
                                        <option value="SUV" @(Model.BodyType == "SUV" ? "selected" : "")>SUV</option>
                                        <option value="Hatchback" @(Model.BodyType == "Hatchback" ? "selected" : "")>Hatchback</option>
                                        <option value="Coupe" @(Model.BodyType == "Coupe" ? "selected" : "")>Coupe</option>
                                        <option value="Wagon" @(Model.BodyType == "Wagon" ? "selected" : "")>Wagon</option>
                                        <option value="Van" @(Model.BodyType == "Van" ? "selected" : "")>Van</option>
                                        <option value="Truck" @(Model.BodyType == "Truck" ? "selected" : "")>Truck</option>
                                    </select>
                                    <span asp-validation-for="BodyType" class="text-danger"></span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group mb-3">
                                    <label asp-for="DriveType" class="control-label">Drive Type</label>
                                    <select name="DriveType" class="form-select">
                                        <option value="">-- Select Drive Type --</option>
                                        <option value="FWD" @(Model.DriveType == "FWD" ? "selected" : "")>Front Wheel Drive (FWD)</option>
                                        <option value="RWD" @(Model.DriveType == "RWD" ? "selected" : "")>Rear Wheel Drive (RWD)</option>
                                        <option value="AWD" @(Model.DriveType == "AWD" ? "selected" : "")>All Wheel Drive (AWD)</option>
                                        <option value="4WD" @(Model.DriveType == "4WD" ? "selected" : "")>Four Wheel Drive (4WD)</option>
                                    </select>
                                    <span asp-validation-for="DriveType" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group mb-3">
                                    <label asp-for="ReleaseDate" class="control-label">Release Date</label>
                                    <input name="ReleaseDate" class="form-control" type="date" value="@Model.ReleaseDate.ToString("yyyy-MM-dd")" />
                                    <span asp-validation-for="ReleaseDate" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group mb-3">
                                    <label asp-for="LastServiceDate" class="control-label">Last Service Date</label>
                                    <input name="LastServiceDate" class="form-control" type="date" value="@Model.LastServiceDate.ToString("yyyy-MM-dd")" />
                                    <span asp-validation-for="LastServiceDate" class="text-danger"></span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label asp-for="NextServiceDate" class="control-label">Next Service Date</label>
                                    <input name="NextServiceDate" class="form-control" type="date" value="@Model.NextServiceDate.ToString("yyyy-MM-dd")" />
                                    <span asp-validation-for="NextServiceDate" class="text-danger"></span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group mb-3">
                                    <label asp-for="ImageUrl" class="control-label">Image URL</label>
                                    <input name="ImageUrl" class="form-control" placeholder="https://example.com/image.jpg" value="@Model.ImageUrl" />
                                    <span asp-validation-for="ImageUrl" class="text-danger"></span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group mb-3">
                            <label asp-for="Features" class="control-label">Features (comma-separated)</label>
                            <input name="Features" class="form-control" placeholder="GPS, Bluetooth, Backup Camera, etc." value="@Model.Features" />
                            <span asp-validation-for="Features" class="text-danger"></span>
                        </div>

                        <div class="form-group mb-3">
                            <label asp-for="Description" class="control-label">Description</label>
                            <textarea name="Description" class="form-control" rows="3">@Model.Description</textarea>
                            <span asp-validation-for="Description" class="text-danger"></span>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-check mb-3">
                                    <input name="IsAvailable" type="checkbox" class="form-check-input" value="true" @(Model.IsAvailable ? "checked" : "") />
                                    <input name="IsAvailable" type="hidden" value="false" />
                                    <label asp-for="IsAvailable" class="form-check-label">Available for Rent</label>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-check mb-3">
                                    <input name="IsFeatured" type="checkbox" class="form-check-input" value="true" @(Model.IsFeatured ? "checked" : "") />
                                    <input name="IsFeatured" type="hidden" value="false" />
                                    <label asp-for="IsFeatured" class="form-check-label">Featured Car</label>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group mb-3">
                                    <label asp-for="Rating" class="control-label">Rating (0-5)</label>
                                    <input name="Rating" class="form-control" type="number" step="0.1" min="0" max="5" value="@Model.Rating" />
                                    <span asp-validation-for="Rating" class="text-danger"></span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                            <a asp-action="Index" class="btn btn-secondary">
                                <i class="fas fa-arrow-left"></i> Back to List
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}


